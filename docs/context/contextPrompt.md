#### Prompt:

- In a Slack-like chat system, we accommodate both human and AI participants across multiple channels. The UI communicates with the OpenAI GPT model via a backend service that processes user messages and AI responses.
- Our Next.js 13 TypeScript-based project utilizes tools such as pnpm, React Query, Axios, MobX, Socket.io, Redis, and Postgres db, and has already established Authentication, Database, CI/CD, Testing, and UI setup. The immediate objective is managing data flow in chat channels, focusing on cache implementation, long-term storage management, and real-time updates. Considerations around concurrency handling, scalability, fault tolerance, security, testing, dev environment, performance, and devices are currently non-pertinent.
- The system employs MobX and React Query for state management, Socket.io for real-time updates, and Redis for caching channel history. React Query caches recent messages in active channels to enable swift channel-switching. The Postgres database retains a month-long text-only chat history per channel.
- The 'channel' entity in the database schema includes 'id', 'name', and 'description'; the 'user' entity incorporates 'id', 'name', 'email', and 'password'; the 'message' entity, related to both 'user' and 'channel' via foreign keys, encapsulates 'id', 'content', 'timestamp', 'userId', and 'channelId'.
- Please provide detailed low-level steps in markdown format for achieving the objective of managing data flow within chat channels, with an emphasis on cache implementation, long-term storage management, and real-time updates.
